---
title: [WIP]如何在前端弹出来一个框
date: 2023-04-10T20:49:27+08:00
tags: [Development]
categories: [Development]
---

目前 Cyber Terminal 前端的基础样式解决方案是`tailwindcss`，配合 `daisy UI` 和我自己封装的一套 `RxUI` 勉强凑合着用。`daisy UI` 的设计理念是纯 CSS 实现，不掺杂任何的 JavaScript 代码，我挺喜欢这种实现方式，纯 CSS 实现的用户界面比掺杂了 JS 的界面总是让人更放心一点。但是 CSS 终究是没有 JS 强大的，它只是一套静态布局系统，这就导致了一系列的用户体验问题。

比如说一个简单的弹出框。在 `daisy UI` 的解决方案中，他们使用了元素的 `focus` 状态，配合 CSS 选择器来显示弹出元素。这乍一听好像挺符合设计思想的，但是用的时候就出现了一堆问题。为了保证元素正确加载，在未显示的情况下，弹出元素上设置的并不是 `display: none`，而是 `visibility: hidden`，这就导致弹出元素即使在未显示的状态下也占据了实际空间的，只是不可见而已，可能会在某些情况下打乱布局。

比如，我想要实现一个可滚动的 `Table` 组件，在表格的每一列上我都放置了一系列操作按钮，对于比较危险的操作，例如删除，会有一个弹出框让用户进行二次确认。这个时候问题就来了，由于弹出框在未显示的情况下也是占据空间的，最后一列上的弹出框就会继续向下拓展，就导致了表格滚动到最后一列后还能继续向下滚动一段距离，看起来很奇怪。

问题还不止这一点，由于 CSS 没有类似于 `floating` 的功能，元素是无法探查可视边界的。Table 组件默认可滚动，导致内部元素的溢出行为是`clip`，于是把溢出窗口的对话框一起给切了。不只是对话框，还有 `tooltip` 之类的东西，会变成这个样子：

![部分文字被切掉了](https://files.catbox.moe/rccxzh.png)

嘛……虽然应该没人拿宽度这么巧的设备打CTF……但是这个行为太蠢了，我写的时候得时时刻刻注意着弹出位置，放左边溢出了，放右边也溢出了，放下边好消息是没溢出，坏消息是给滚动条撑起来了……

![啊？](https://files.catbox.moe/0up7lu.jpg)

于是我就开始找解决方案，找着找着找到了Microsoft在油管上发的[Fluent UI Design相关视频](https://www.youtube.com/watch?v=yhzAn4A1gbk)。他们最终选了 [popper.js](https://popper.js.org/) 作为弹出式组件的解决方案。但是……这个组件只有 React 框架的集成方案，Vue 的几个第三方集成方案都不太好使了。

还是自己写吧……
